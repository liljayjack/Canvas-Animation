<!doctype html>
<html>
<head>
	<title>Canvas Animation</title>
	<script>

	var canvas;
	var context;
	var circles = [];
	var innerCircles = [];
	var stars = [];
	var timer;
	

	function init(){
		canvas = document.getElementById('canvas');
		context = canvas.getContext('2d');

		window.addEventListener('resize', resizeCanvas, false);
		window.addEventListener('orientationchange', resizeCanvas, false);

		resizeCanvas();
		makeCircles();
		makeStars();

		timer = setInterval(resizeCanvas, 40);
	}

	function Circle(){
		this.x = Math.floor(Math.random() * canvas.width);
		this.y = Math.floor(Math.random() * canvas.height);

		var colors = ['BurlyWood', 'DarkGoldenRod', 'DarkSalmon', 'DarkViolet', 'yellow', 'DarkSeaGreen', 'DarkOrange', 'Crimson'];
		this.color = colors[Math.floor(Math.random() * colors.length)];
		this.radius = Math.floor(Math.random() * (50 - 15 + 1)) + 15;
	}

	function Star(){
		this.rot = Math.PI / 2 * 3;
   		this.cx = Math.floor(Math.random() * canvas.width);
   	 	this.cy = Math.floor(Math.random() * canvas.height);
    	this.x = this.cx;
	    this.y = this.cy;
    	this.step = Math.PI / 5;

    	this.outerRadius = Math.floor(Math.random()*60 +10);
    	this.innerRadius = this.outerRadius/2;

    	var colors = ['BurlyWood', 'DarkGoldenRod', 'DarkSalmon', 'DarkViolet', 'yellow', 'DarkSeaGreen', 'DarkOrange', 'Crimson'];
    	this.color = colors[Math.floor(Math.random() * colors.length)];
	}

	function drawCircle(circle){
		var c = circle;
		var iC = circle;

		context.beginPath();
		context.arc(c.x, c.y, c.radius, 0, degreesToRadians(360), true);
		context.fillStyle = c.color;
		context.fill();

		
		context.beginPath();
		context.arc(iC.x, iC.y, (iC.radius-5), 0, degreesToRadians(360), true);
		context.fillStyle = 'black';
		context.fill();
	}

	function growCircles(array){
	
		for (var i = 0; i<circles.length; i++){
			var circle = array[i];
			if (circle.radius < 75){
				circle.radius += 2;
			} else{
				array.splice(i, 1);
				array.push(new Circle());
			}
		}
	}

	function makeCircles(){
		for(var i = 0; i < 15; i++){
			circles.push(new Circle());
		}
	}

	function makeStars(){
		for(var i = 0; i < circles.length; i++){
			stars.push(new Star());
		}
	}

	function drawStars(star) {
		var str = star;

	    context.beginPath();
    	context.moveTo(str.cx, str.cy - str.outerRadius)
    	for (i = 0; i < 5; i++) {
        	str.x = str.cx + Math.cos(str.rot) * str.outerRadius;
        	str.y = str.cy + Math.sin(str.rot) * str.outerRadius;
        	context.lineTo(str.x, str.y)
        	str.rot += str.step

        	str.x = str.cx + Math.cos(str.rot) * str.innerRadius;
        	str.y = str.cy + Math.sin(str.rot) * str.innerRadius;
        	context.lineTo(str.x, str.y)
        	str.rot += str.step
    		}
    
    	//var colors = ['BurlyWood', 'DarkGoldenRod', 'DarkSalmon', 'DarkViolet', 'yellow', 'DarkSeaGreen', 'DarkOrange', 'Crimson'];
    	//var color = colors[Math.floor(Math.random() * colors.length)];
    
    	context.lineTo(str.cx, str.cy - str.outerRadius)
    	context.closePath();
    	context.stroke();
    	context.fillStyle=str.color;
	    context.fill();
		}

	function fillBackgroundColor(){
		context.fillStyle = 'black';
		context.fillRect(0,0, canvas.width, canvas.height);
		}

	function degreesToRadians(degrees){
		return (degrees*Math.PI)/180;
		}

	function resizeCanvas(){
		canvas.width = window.innerWidth - 15;
		canvas.height = window.innerHeight - 15;
		fillBackgroundColor();

		for(var i = 0; i< circles.length; i++){
			drawStars(stars[i]);
		}
		for(var i = 0; i< circles.length; i++){
			drawCircle(circles[i]);
		}

		growCircles(circles);
	}

	window.onload = init;
	</script>
</head>

<body>
	<canvas id = 'canvas' width=500 height=500></canvas>
</body>
</html>