<!doctype html>
<html>
<head>
	<title>Canvas Animation</title>
	<script>

	var canvas;
	var context;
	var circles = [];
	var innerCircles = [];
	var timer;
	

	function init(){
		canvas = document.getElementById('canvas');
		context = canvas.getContext('2d');

		window.addEventListener('resize', resizeCanvas, false);
		window.addEventListener('orientationchange', resizeCanvas, false);

		resizeCanvas();
		makeCircles();

		timer = setInterval(resizeCanvas, 40);

		//makeCircles();
		//drawCircle();
	}

	function Circle(){
		this.x = Math.floor(Math.random() * canvas.width);
		this.y = Math.floor(Math.random() * canvas.height);

		var colors = ['BurlyWood', 'DarkGoldenRod', 'DarkSalmon', 'DarkViolet', 'yellow', 'DarkSeaGreen', 'DarkOrange', 'Crimson'];
		this.color = colors[Math.floor(Math.random() * colors.length)];
		this.radius = Math.floor(Math.random() * (50 - 15 + 1)) + 15;
	}

	function drawCircle(circle){
		var c = circle;
		var iC = circle;

		context.beginPath();
		context.arc(c.x, c.y, c.radius, 0, degreesToRadians(360), true);
		context.fillStyle = c.color;
		context.fill();

		
		context.beginPath();
		context.arc(iC.x, iC.y, (iC.radius-5), 0, degreesToRadians(360), true);
		context.fillStyle = 'black';
		context.fill();
	}

	function growCircles(array){
	
		for (var i = 0; i<circles.length; i++){
			var circle = array[i];
			if (circle.radius < 75){
				circle.radius += 2;
			} else{
				array.splice(i, 1);
				array.push(new Circle());
			}
		}
	}

	function makeCircles(){
		circles = []
		for(var i = 0; i < 15; i++){
			circles.push(new Circle());
		}
	}

	function drawStars() {
    	var rot = Math.PI / 2 * 3;
   		var cx = Math.floor(Math.random() * canvas.width);
   	 	var cy = Math.floor(Math.random() * canvas.height);
    	var x = cx;
	    var y = cy;
    	var step = Math.PI / 5;

    	var outerRadius = Math.floor(Math.random()*60 +10);
    	var innerRadius = outerRadius/2;

	    context.beginPath();
    	context.moveTo(cx, cy - outerRadius)
    	for (i = 0; i < 5; i++) {
        	x = cx + Math.cos(rot) * outerRadius;
        	y = cy + Math.sin(rot) * outerRadius;
        	context.lineTo(x, y)
        	rot += step

        	x = cx + Math.cos(rot) * innerRadius;
        	y = cy + Math.sin(rot) * innerRadius;
        	context.lineTo(x, y)
        	rot += step
    		}
    
    	var colors = ['BurlyWood', 'DarkGoldenRod', 'DarkSalmon', 'DarkViolet', 'yellow', 'DarkSeaGreen', 'DarkOrange', 'Crimson'];
    	var color = colors[Math.floor(Math.random() * colors.length)];
    
    	context.lineTo(cx, cy - outerRadius)
    	context.closePath();
    	context.stroke();
    	context.fillStyle=color;
	    context.fill();
		}

	function fillBackgroundColor(){
		context.fillStyle = 'black';
		context.fillRect(0,0, canvas.width, canvas.height);
		}

	function degreesToRadians(degrees){
		return (degrees*Math.PI)/180;
		}

	function resizeCanvas(){
		canvas.width = window.innerWidth - 15;
		canvas.height = window.innerHeight - 15;
		fillBackgroundColor();

		for(var i = 0; i< circles.length; i++){
			//drawStars();
		}
		for(var i = 0; i< circles.length; i++){
			drawCircle(circles[i]);
		}

		growCircles(circles);
	}

	window.onload = init;
	</script>
</head>

<body>
	<canvas id = 'canvas' width=500 height=500></canvas>
</body>
</html>